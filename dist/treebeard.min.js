!function(t,e){"use strict";if("function"==typeof define&&define.amd)define(["jQuery","mithril"],e);else if("object"==typeof exports){var o=require("mithril");module.exports=e(jQuery,o)}else{var o=t.m;t.Treebeard=e(jQuery,o)}}(this,function(t,e){"use strict";function o(){return window.treebeardCounter=window.treebeardCounter+1,window.treebeardCounter}function n(t,e){return"number"===e?function(t,e){return t-e}:function(e,o){var n=e.data[t].toLowerCase().replace(/\s+/g," "),i=o.data[t].toLowerCase().replace(/\s+/g," ");return i>n?-1:n>i?1:0}}function i(t,e){return"number"===e?function(t,e){return e-t}:function(e,o){var n=e.data[t].toLowerCase().replace(/\s/g,""),i=o.data[t].toLowerCase().replace(/\s/g,"");return n>i?-1:i>n?1:0}}function r(t,e,o){var n,i=!1;for(n=0;n<t.length;n++)if(t[n]&&t[n].hasOwnProperty(e)&&arguments.length>2&&t[n][e]===o)return t.splice(n,1),i=!0;return i}var s,a,l,d={},c={};window.treebeardCounter||(window.treebeardCounter=-1),a=function(t,o,n,i){this.column=n||null,this.type=o||"info",this.message=t||"Hello",this.on=!1,this.timeout=i||3e3,this.css="",this.toggle=function(){this.on=!this.on},this.show=function(){this.on=!0;var t=this;t.timeout&&setTimeout(function(){t.hide()},t.timeout),e.redraw(!0)},this.hide=function(){this.on=!1,e.redraw(!0)},this.update=function(t,e,o,n,i){this.type=e||this.type,this.column=o||this.column,this.timeout=n||this.timeout,this.message=t,this.css=i||"",this.show(!0)},this.selfDestruct=function(t,e,o){this.on=!1,this.on=!0;var n=this,i=o||3e3;setTimeout(function(){n.hide(),e.removeSelf(),t.redraw()},i)}},l=function(){var t=$("#tb-tbody"),o=this;this.on=!1,this.timeout=!1,this.css="",this.content=null,this.actions=null,this.height=t.height(),this.width=t.width(),this.dismiss=function(){this.on=!1,e.redraw(!0)},this.show=function(){this.on=!0,o.timeout&&setTimeout(function(){o.dismiss()},o.timeout),e.redraw(!0)},this.toggle=function(){this.on=!this.on,e.redraw(!0)},this.update=function(t,n){o.updateSize(),t&&(this.content=t),n&&(this.actions=n),this.on=!0,e.redraw(!0)},this.updateSize=function(){this.height=t.height(),this.width=t.width(),e.redraw(!0)},$(window).resize(function(){o.updateSize()})},s=function(t){void 0===t?(this.data={},this.kind="folder",this.open=!0):(this.data=t,this.kind=t.kind||"item",this.open=t.open),"folder"===this.kind&&(this.load=!1),this.id=o(),this.depth=0,this.children=[],this.parentID=null,this.notify=new a},s.prototype.add=function(t,e){return t.parentID=this.id,t.depth=this.depth+1,t.open=!1,t.load=!1,t.depth>1&&0===t.children.length&&(t.open=!1),e?this.children.unshift(t):this.children.push(t),this},s.prototype.move=function(t){var e=d[t],o=this.parentID,n=d[o];return e.add(this),e.redoDepth(),o>-1&&n.removeChild(parseInt(this.id,10)),this},s.prototype.redoDepth=function(){function t(e,o){var n;for(n=0;n<e.length;n++)e[n].depth=o,e[n].children.length>0&&t(e[n].children,o+1)}t(this.children,this.depth+1)},s.prototype.removeSelf=function(){var t=this.parent();return t.removeChild(this.id),t},s.prototype.removeChild=function(t){return r(this.children,"id",t),this},s.prototype.next=function(){var t,e,o;for(e=d[this.parentID],o=0;o<e.children.length;o++)if(e.children[o].id===this.id)return t=e.children[o+1];if(!t)throw new Error("Treebeard Error: Item with ID '"+this.id+"' has no next sibling")},s.prototype.prev=function(){var t,e,o;for(e=d[this.parentID],o=0;o<e.children.length;o++)if(e.children[o].id===this.id)return t=e.children[o-1];if(!t)throw new Error("Treebeard Error: Item with ID '"+this.id+"' has no previous sibling")},s.prototype.child=function(t){var e,o;for(o=0;o<this.children.length;o++)if(this.children[o].id===t)return e=this.children[o];if(!e)throw new Error("Treebeard Error: Parent with ID '"+this.id+"' has no child with ID: "+t)},s.prototype.parent=function(){return d[this.parentID]?d[this.parentID]:void 0},s.prototype.sortChildren=function(t,e,o,r){var s=t.options.resolveRows.call(t,this),a=s[r].data;if(!e||"asc"!==e&&"desc"!==e)throw new Error("Treebeard Error: To sort children you need to pass direction as asc or desc to Item.sortChildren");this.children.length>0&&("asc"===e&&this.children.sort(n(a,o)),"desc"===e&&this.children.sort(i(a,o)))},s.prototype.isAncestor=function(t){function e(t,o){return console.log("is ancestor",t,o),t.id===o.id?!0:t.parent()?e(t.parent(),o):!1}return t.parent()?e(t.parent(),this):!1},s.prototype.isDescendant=function(t){function e(t,i){for(o=0;o<t.length;o++){if(t[o].id===i.id){n=!0;break}if(t[o].children.length>0)return e(t[o].children,i)}return n}var o,n=!1;return e(t.children,this)},c.controller=function(t){function o(){r.dropzone.destroy()}function n(){r.dropzone&&o();var t,e=$.extend({clickable:!1,counter:0,accept:function(t,e){r.options.addcheck.call(this,r,r.dropzoneItemCache,t)&&$.when(r.options.resolveUploadUrl.call(r,r.dropzoneItemCache)).then(function(t){if(t&&(r.dropzone.options.url=t,r.dropzone.options.counter++,r.dropzone.options.counter<2)){console.log("counter",r.dropzone.options.counter);var e=r.returnIndex(r.dropzoneItemCache.id);r.dropzoneItemCache.open||r.toggleFolder(e,null)}return t}).then(function(){$.isFunction(r.options.resolveUploadMethod)&&(r.dropzone.options.method=r.options.resolveUploadMethod.call(r,r.dropzoneItemCache))}).done(function(){e()})},drop:function(t){var e=$(t.target).closest(".tb-row").attr("data-id"),o=d[e];r.dropzoneItemCache=o,$.isFunction(r.options.dropzoneEvents.drop)&&r.options.dropzoneEvents.drop.call(this,r,t)},dragstart:function(t){$.isFunction(r.options.dropzoneEvents.dragstart)&&r.options.dropzoneEvents.dragstart.call(this,r,t)},dragend:function(t){$.isFunction(r.options.dropzoneEvents.dragend)&&r.options.dropzoneEvents.dragend.call(this,r,t)},dragenter:function(t){$.isFunction(r.options.dropzoneEvents.dragenter)&&r.options.dropzoneEvents.dragenter.call(this,r,t)},dragover:function(t){$.isFunction(r.options.dropzoneEvents.dragover)&&r.options.dropzoneEvents.dragover.call(this,r,t)},dragleave:function(t){$.isFunction(r.options.dropzoneEvents.dragleave)&&r.options.dropzoneEvents.dragleave.call(this,r,t)},success:function(t,e){$.isFunction(r.options.dropzoneEvents.success)&&r.options.dropzoneEvents.success.call(this,r,t,e),$.isFunction(r.options.onadd)&&r.options.onadd.call(this,r,r.dropzoneItemCache,t,e)},error:function(t,e,o){$.isFunction(r.options.dropzoneEvents.error)&&r.options.dropzoneEvents.error.call(this,r,t,e,o)},uploadprogress:function(t,e,o){$.isFunction(r.options.dropzoneEvents.uploadprogress)&&r.options.dropzoneEvents.uploadprogress.call(this,r,t,e,o)},sending:function(t,e,o){$.isFunction(r.options.dropzoneEvents.sending)&&r.options.dropzoneEvents.sending.call(this,r,t,e,o)},complete:function(t){$.isFunction(r.options.dropzoneEvents.complete)&&r.options.dropzoneEvents.complete.call(this,r,t)},addedfile:function(t){$.isFunction(r.options.dropzoneEvents.addedfile)&&r.options.dropzoneEvents.addedfile.call(this,r,t)}},r.options.dropzone);if(t="object"==typeof module?require("dropzone"):window.Dropzone,"undefined"==typeof t)throw new Error('To enable uploads Treebeard needs "Dropzone" to be installed.');r.dropzone=new t("#"+r.options.divID,e)}function i(t){$.isArray(t)?$.when(r.buildTree(t)).then(function(t){return r.treeData=t,d[0]=t,r.flatten(r.treeData.children),t}).done(function(){r.calculateVisible(),r.calculateHeight(),r.initialized=!0}):e.request({method:"GET",url:t}).then(function(t){r.treeData=r.buildTree(t)}).then(function(){d[0]=r.treeData,r.flatten(r.treeData.children)}).then(function(){r.calculateVisible(),r.calculateHeight(),r.initialized=!0})}var r=this,a={asc:!1,desc:!1,column:""},c=0,h=0;if(e.redraw.strategy("all"),this.modal=new l,this.flatData=[],this.treeData={},this.filterText=e.prop(""),this.showRange=[],this.options=t,this.selected=void 0,this.mouseon=void 0,this.rangeMargin=0,this.visibleIndexes=[],this.visibleTop=void 0,this.currentPage=e.prop(1),this.dropzone=null,this.dropzoneItemCache=void 0,this.filterOn=!1,this.multiselected=[],this.pressedKey=void 0,this.dragOngoing=!1,this.draggedCache=null,this.initialized=!1,this.redraw=function(){r.flatten(r.treeData.children,r.visibleTop)},this.resetCounter=function(t){window.treebeardCounter=0!==t?t||-1:0},this.moveOn=function(){var t,e,o,n,i;t={helper:"clone",cursor:"move",containment:".tb-tbody-inner",delay:200,drag:function(t,e){console.log("Drag",t,e);var o;r.options.dragEvents.drag?r.options.dragEvents.drag.call(r,t,e):(r.draggedCache||(r.draggedCache=$(e.helper).clone()),r.multiselected.length>2&&(o=$(t.target).text()+" + "+(r.multiselected.length-1)),r.draggedCache.css({height:"25px",width:"400px",background:"white",padding:"0px 10px","box-shadow":"0 0 4px #ccc"}),$(e.helper).css({height:"25px",width:"400px",background:"white",padding:"0px 10px","box-shadow":"0 0 4px #ccc"}).text(o))},create:function(t,e){r.options.dragEvents.create&&r.options.dragEvents.create.call(r,t,e)},start:function(t,e){r.options.dragEvents.start&&r.options.dragEvents.start.call(r,t,e),r.dragOngoing=!0,$(".tb-row").removeClass(r.options.hoverClass+" tb-h-error tb-h-success")},stop:function(t,e){r.options.dragEvents.stop&&r.options.dragEvents.stop.call(r,t,e),r.dragOngoing=!1,$(".tb-row").removeClass(r.options.hoverClass+" tb-h-error tb-h-success")}},e={tolerance:"pointer",activate:function(t,e){r.options.dropEvents.activate&&r.options.dropEvents.activate.call(r,t,e)},create:function(t,e){r.options.dropEvents.create&&r.options.dropEvents.create.call(r,t,e)},deactivate:function(t,e){r.options.dropEvents.deactivate&&r.options.dropEvents.deactivate.call(r,t,e)},drop:function(t,e){r.options.dropEvents.drop&&r.options.dropEvents.drop.call(r,t,e),console.log("Drop",t,e)},out:function(t,e){r.options.dropEvents.out&&r.options.dropEvents.out.call(r,t,e)},over:function(t,e){var o=parseInt($(t.target).closest(".tb-row").attr("data-id")),n=r.flatData[r.showRange[r.showRange.length-1]].id,i=r.flatData[r.showRange[0]].id;if(console.log(o,n),o===n){console.log("======= last");var s=$("#tb-tbody").scrollTop();$("#tb-tbody").scrollTop(s+35)}if(o===i){console.log("======= first");var s=$("#tb-tbody").scrollTop();$("#tb-tbody").scrollTop(s-35)}r.options.dropEvents.over&&r.options.dropEvents.over.call(r,t,e)}},o=$.extend(t,r.options.dragOptions),n=$.extend(e,r.options.dropOptions),i=r.options.moveClass?r.options.moveClass:"td-title",$("."+i).draggable(o),$(".tb-row").droppable(n)},this.deleteNode=function(t,e){var o=d[e],n=$.extend({},o);return $.when(r.options.deletecheck.call(r,o)).done(function(o){if(o){var i=d[t];i.removeChild(e),r.flatten(r.treeData.children,r.visibleTop),r.options.ondelete&&r.options.ondelete.call(r,n)}}),n},this.canMove=function(t,e){return"folder"!==t.kind?!1:t.isDescendant(e)?!1:!0},this.createItem=function(t,e){var o,n=d[e];return $.when(r.options.createcheck.call(r,t,n)).done(function(e){if(!e)throw new Error("Treebeard Error: createcheck function returned false, item not created.");o=new s(t),n.add(o,!0),r.flatten(r.treeData.children,r.visibleTop),r.options.oncreate&&r.options.oncreate.call(r,o,n)}),o},this.find=function(t){return d[t]?d[t]:void 0},this.returnIndex=function(t){var e,o,n=r.flatData.length;for(e=0;n>e;e++)if(o=r.flatData[e],o.id===t)return e;return void 0},this.returnRangeIndex=function(t){var e,o,n=r.showRange.length;for(e=0;n>e;e++)if(o=r.flatData[r.showRange[e]],o.id===t)return e;return void 0},this.rowFilterResult=function(t){$("#tb-tbody").scrollTop(0),r.currentPage(1);var e,o,n=r.options.resolveRows.call(r,t),i=r.filterText().toLowerCase(),s=!1;for(e=0;e<n.length;e++)o=n[e],o.filter&&-1!==t.data[o.data].toLowerCase().indexOf(i)&&(s=!0);return s},this.filter=function(t){e.withAttr("value",r.filterText)(t);var o=r.filterText().toLowerCase(),n=r.visibleTop;0===o.length?(r.filterOn=!1,r.calculateVisible(0),r.calculateHeight(),e.redraw(!0),$("#tb-tbody").scrollTop(h),r.options.onfilterreset&&r.options.onfilterreset.call(r,o)):(r.filterOn||(r.filterOn=!0,h=c),r.visibleTop||(n=0),r.calculateVisible(n),r.calculateHeight(),e.redraw(!0),r.options.onfilter&&r.options.onfilter.call(r,o))},this.updateFolder=function(t,e){if(t){e.children=[];var o,n;for(n=0;n<t.length;n++)o=r.buildTree(t[n],e),e.add(o);e.open=!0}var i=r.returnIndex(e.id);e.open=!1,e.load=!1,r.toggleFolder(i,null)},this.toggleFolder=function(t,o){if(void 0===t||null===t)return void r.redraw();console.log("Toggled");var n,i,s,a,l,c,h=r.flatData.length,p=d[r.flatData[t].id],u=r.flatData[t],f=!1,g=u.depth,v=u.depth,w=$('.tb-row[data-id="'+u.id+'"]').find(".tb-toggle-icon");e.render(w.get(0),e("i.icon-refresh.icon-spin")),$.when(r.options.resolveLazyloadUrl(r,p)).done(function(b){if(c=b,c&&"folder"===u.row.kind&&p.open===!1&&p.load===!1)p.children=[],e.request({method:"GET",url:c}).then(function(t){if(t){for($.isArray(t)||(t=t.data),i=0;i<t.length;i++)n=r.buildTree(t[i],p),p.add(n);p.open=!0,p.load=!0;var o=r.options.resolveToggle.call(r,p);e.render(w.get(0),o)}else r.options.lazyLoadError.call(r,p)},function(){r.options.lazyLoadError.call(r,p)}).then(function(){r.flatten(r.treeData.children,r.visibleTop),r.options.lazyLoadOnLoad&&r.options.lazyLoadOnLoad.call(r,p)});else{for(s=t+1;h>s&&(a=r.flatData[s],l=d[r.flatData[s].id],!(a.depth<=v));s++)f&&a.depth>g||(a.depth===g&&(f=!1),p.open?a.show=!1:(a.show=!0,l.open||(g=a.depth,f=!0)));p.open=!p.open,r.calculateVisible(r.visibleTop),r.calculateHeight(),e.redraw(!0);var m=r.options.resolveToggle.call(r,p);e.render(w.get(0),m)}r.moveOn(),r.options.ontogglefolder&&r.options.ontogglefolder.call(r,p,o)})},this.sortToggle=function(t){var e,o=$(t.target),n=o.attr("data-direction"),i=this,s=o.attr("data-sortType"),l=o.parent(),d=0;$(".asc-btn, .desc-btn").addClass("tb-sort-inactive"),a.asc=!1,a.desc=!1,a[n]||(e=function(t){t.map(function(t){t.sortChildren(r,n,s,i),t.children.length>0&&e(t.children),d+=1})},r.treeData.sortChildren(r,n,s,i),e(r.treeData.children),l.children("."+n+"-btn").removeClass("tb-sort-inactive"),a[n]=!0,r.flatten(r.treeData.children,0))},this.calculateHeight=function(){var t;return r.options.paginate?(t=r.options.showTotal*r.options.rowHeight,r.rangeMargin=0):t=r.visibleIndexes.length*r.options.rowHeight,$(".tb-tbody-inner").height(t),t},this.calculateVisible=function(t){t=t||0;var e,o,n=r.flatData.length,i=0;for(r.visibleIndexes=[],e=0;n>e;e++)o=d[r.flatData[e].id],r.filterOn?r.rowFilterResult(o)&&(i++,r.visibleIndexes.push(e)):r.flatData[e].show&&(r.visibleIndexes.push(e),i+=1);return r.refreshRange(t),i},this.refreshRange=function(t){var o,n,i=r.visibleIndexes.length,s=[],a=0;for((!t||t>r.flatData.length)&&(t=0),r.visibleTop=t,o=t;i>o&&s.length!==r.options.showTotal;o++)n=r.visibleIndexes[o],s.push(n),a+=1;r.showRange=s,e.redraw(!0)},this.toggleScroll=function(){r.options.paginate=!1,$(".tb-paginate").removeClass("active"),$(".tb-scroll").addClass("active"),$("#tb-tbody").scrollTop((r.currentPage()-1)*r.options.showTotal*r.options.rowHeight),r.calculateHeight()},this.togglePaginate=function(){var t=r.showRange[0],e=r.visibleIndexes.indexOf(t),o=Math.floor(e/r.options.showTotal),n=o*r.options.showTotal;r.options.paginate=!0,$(".tb-scroll").removeClass("active"),$(".tb-paginate").addClass("active"),r.currentPage(o+1),r.calculateHeight(),r.refreshRange(n)},this.pageUp=function(){var t=r.showRange[r.options.showTotal-1],e=r.visibleIndexes.indexOf(t);return e>-1&&e+1<r.visibleIndexes.length?(r.refreshRange(e+1),r.currentPage(r.currentPage()+1),!0):!1},this.pageDown=function(){var t=r.showRange[0],e=r.visibleIndexes.indexOf(t);return e&&e>0?(r.refreshRange(e-r.options.showTotal),r.currentPage(r.currentPage()-1),!0):!1},this.goToPage=function(t){if(t&&t>0&&t<=Math.ceil(r.visibleIndexes.length/r.options.showTotal)){var e=r.options.showTotal*(t-1);return r.currentPage(t),r.refreshRange(e),!0}return!1},this.isMultiselected=function(t){var e=!1;return r.multiselected.map(function(o){o.id===t&&(e=!0)}),e},this.removeMultiselected=function(t){return r.multiselected.map(function(e,o,n){e.id===t&&n.splice(o,1)}),!1},this.highlightMultiselect=function(){$("."+r.options.hoverClassMultiselect).removeClass(r.options.hoverClassMultiselect),this.multiselected.map(function(t){$('.tb-row[data-id="'+t.id+'"]').addClass(r.options.hoverClassMultiselect)})},this.handleMultiselect=function(t,e,o){var n,i,s,a,l,c=d[t];if(16===r.pressedKey)if(0!==r.multiselected.length||r.selected){if(n=r.returnRangeIndex(r.selected),i=r.returnRangeIndex(t),n>i?(s=i,a=n):(s=n,a=i),n!==i)for(r.multiselected=[],l=s;a+1>l;l++)r.multiselected.push(d[r.flatData[r.showRange[l]].id])}else r.selected=c.id,r.multiselected.push(c);91===r.pressedKey&&(r.isMultiselected(c.id)?r.removeMultiselected(c.id):r.multiselected.push(c)),r.options.onmultiselect&&r.options.onmultiselect.call(r,o,c),r.highlightMultiselect.call(this)},this.clearMultiselect=function(){$("."+r.options.hoverClassMultiselect).removeClass(r.options.hoverClassMultiselect),r.multiselected=[]},this.buildTree=function(t,e){var o,n,i,a,l;if(Array.isArray(t)?(o=new s,n=t):(o=new s(t),n=t.children,o.depth=e.depth+1),n)for(i=n.length,l=0;i>l;l++)a=r.buildTree(n[l],o),o.add(a);return o},this.flatten=function(t,o){r.flatData=[];var n,i=function s(t,i,a){var l,c,h,p=t.length;for(l=0;p>l;l++)n&&t[l].depth<=n&&(i=!0),c=t[l].children,h={id:t[l].id,depth:t[l].depth,row:t[l].data},h.show=i,t[l].children.length>0&&!t[l].open&&(i=!1,(!n||n>t[l].depth)&&(n=t[l].depth)),r.flatData.push(h),c.length>0&&s(c,i,!1),d[t[l].id]=t[l],a&&l===p-1&&(r.calculateVisible(o),r.calculateHeight(),e.redraw(!0),r.options.redrawComplete&&r.options.redrawComplete.call(r))};return i(t,!0,!0),t},this.init=function(t,o){r.options.allowMove&&r.moveOn();var i=$("#tb-tbody").height();r.options.showTotal=Math.floor(i/r.options.rowHeight),o||(r.options.rowHeight||(r.options.rowHeight=$(".tb-row").height()),$("#tb-tbody").scroll(function(){if(!r.options.paginate){var t,o,n,i,s,a;t=$(this).scrollTop(),o=t-c,o>0&&o<r.options.rowHeight&&$(this).scrollTop(c+r.options.rowHeight),0>o&&o>-r.options.rowHeight&&$(this).scrollTop(c-r.options.rowHeight),n=r.calculateHeight(),i=$(this).children(".tb-tbody-inner").outerHeight(),t=$(this).scrollTop(),s=t/i*100,a=Math.round(s/100*r.visibleIndexes.length),r.rangeMargin=Math.round(n*(t/i)),r.refreshRange(a),e.redraw(!0),c=t}}),console.log("Uploads",r.options),r.options.uploads&&n(),$.isFunction(r.options.onload)&&r.options.onload.call(r),r.options.multiselect&&($(window).keydown(function(t){r.pressedKey=t.keyCode,console.log("Pressed Key",r.pressedKey)}),$(window).keyup(function(){r.pressedKey=void 0,console.log("Pressed Key",r.pressedKey)})))},this.destroy=function(){$("#"+r.options.divID).html(""),r.dropzone&&o()},!r.options.filesData)throw new Error("Treebeard Error: You need to define a data source through 'options.filesData'");i(r.options.filesData)},c.view=function(t){return[e(".gridWrapper",{config:t.init},[e(".tb-table",[function(){return t.options.showFilter||t.options.title?e(".tb-head.clearfix",[e(".tb-head-filter",{style:"width:"+t.options.filterStyle.width+"; float:"+t.options.filterStyle.float},[function(){return t.options.showFilter?e("input.form-control[placeholder='filter'][type='text']",{style:"width:100%;display:inline;",onkeyup:t.filter,value:t.filterText()}):void 0}()])]):void 0}(),e(".tb-row-titles",[t.options.columnTitles.call(t).map(function(o,n){var i,r,s="",a=0===n?"10px":"0";return o.sort&&(i=t.options.sortButtonSelector.up?t.options.sortButtonSelector.up:"i.fa.fa-sort-asc",r=t.options.sortButtonSelector.down?t.options.sortButtonSelector.down:"i.fa.fa-sort-desc",s=[e(i+".tb-sort-inactive.asc-btn.m-r-xs",{onclick:t.sortToggle.bind(n),"data-direction":"asc","data-sortType":o.sortType}),e(r+".tb-sort-inactive.desc-btn",{onclick:t.sortToggle.bind(n),"data-direction":"desc","data-sortType":o.sortType})]),e(".tb-th",{style:"width: "+o.width+"; padding-left:"+a},[e("span.m-r-sm",o.title),s])})]),e("#tb-tbody",[function(){return t.modal.on?e(".tb-modal-shade",{style:"width:"+t.modal.width+"px; position : absolute; height:"+t.modal.height+"px;"},[e(".tb-modal-inner",{"class":t.modal.css},[e(".tb-modal-dismiss",{onclick:function(){t.modal.dismiss()}},[e("i.icon-remove-sign")]),e(".tb-modal-content",t.modal.content),e(".tb-modal-footer",t.modal.actions)])]):void 0}(),e(".tb-tbody-inner",[e("",{style:"margin-top:"+t.rangeMargin+"px"},[t.showRange.map(function(o,n){var i,r=t.options.oddEvenClass.odd,s=t.flatData[o].depth,a=t.flatData[o].id,l=d[a],c=t.flatData[o].row,h=l.css||"",p=t.options.resolveRows.call(t,l);return n%2===0&&(r=t.options.oddEvenClass.even),i=t.filterOn?20:20*(s-1),l.notify.on&&!l.notify.column?e(".tb-row",[e(".tb-notify.alert-"+l.notify.type,{"class":l.notify.css},[e("span",l.notify.message)])]):e(".tb-row",{key:a,"class":h+" "+r,"data-id":a,"data-level":s,"data-index":o,"data-rIndex":n,style:"height: "+t.options.rowHeight+"px;",onclick:function(e){t.pressedKey&&t.options.multiselect&&t.handleMultiselect(a,n,e),t.pressedKey||(t.selected=a,t.clearMultiselect()),t.options.onselectrow&&t.options.onselectrow.call(t,l,e)},onmouseover:function(e){t.mouseon=a,t.options.hoverClass&&!t.dragOngoing&&($(".tb-row").removeClass(t.options.hoverClass),$(this).addClass(t.options.hoverClass)),t.options.onmouseoverrow&&t.options.onmouseoverrow.call(t,l,e)}},[p.map(function(n,r){var s,d,h=t.options.columnTitles.call(t)[r],p=n.css?n.css:"";return s=e(".tb-td.tb-col-"+r,{"class":n.css,style:"width:"+h.width},[e("span",c[n.data])]),l.notify.on&&l.notify.column===r?e(".tb-td.tb-col-"+r,{style:"width:"+h.width},[e(".tb-notify.alert-"+l.notify.type,{"class":l.notify.css},[e("span",l.notify.message)])]):(n.folderIcons&&(d=n.custom?e("span.title-text",n.custom.call(t,l,n)):e("span.title-text",c[n.data]+" "),s=e(".tb-td.td-title.tb-col-"+r,{"data-id":a,"class":p,style:"padding-left: "+i+"px; width:"+h.width},[e("span.tb-td-first",function(){var n=[{id:1,css:"tb-expand-icon-holder",resolve:t.options.resolveIcon.call(t,l)},{id:2,css:"tb-toggle-icon",resolve:t.options.resolveToggle.call(t,l)}];return t.filterOn?e("span."+n[0].css,{key:n[0].id},n[0].resolve):[e("span."+n[1].css,{key:n[1].id,onclick:function(e){t.options.togglecheck.call(t,l)&&t.toggleFolder(o,e)}},n[1].resolve),e("span."+n[0].css,{key:n[0].id},n[0].resolve)]}()),d])),!n.folderIcons&&n.custom&&(s=e(".tb-td.tb-col-"+r,{"class":p,style:"width:"+h.width},[n.custom.call(t,l,n)])),s)})])})])])]),function(){return t.options.paginate||t.options.paginateToggle?e(".tb-footer",[e(".row",[e(".col-xs-4",function(){if(t.options.paginateToggle){var o="",n="";return t.options.paginate?n="active":o="active",e(".btn-group.padder-10",[e("button.btn.btn-default.btn-sm.tb-scroll",{onclick:t.toggleScroll,"class":o},"Scroll"),e("button.btn.btn-default.btn-sm.tb-paginate",{onclick:t.togglePaginate,"class":n},"Paginate")])}}()),e(".col-xs-8",[e(".padder-10",[function(){if(t.options.paginate){var o=t.visibleIndexes.length,n=Math.ceil(o/t.options.showTotal);return t.options.resolvePagination?t.options.resolvePagination.call(t,n,t.currentPage()):e(".tb-pagination.pull-right",[e("button.tb-pagination-prev.btn.btn-default.btn-sm.m-r-sm",{onclick:t.pageDown},[e("i.fa.fa-chevron-left")]),e("input.tb-pagination-input.m-r-sm",{type:"text",style:"width: 30px;",onkeyup:function(e){var o=parseInt(e.target.value,10);t.goToPage(o)},value:t.currentPage()}),e("span.tb-pagination-span","/ "+n+" "),e("button.tb-pagination-next.btn.btn-default.btn-sm",{onclick:t.pageUp},[e("i.fa.fa-chevron-right")])])}}()])])])]):void 0}()])])]};var h=function(){this.divID="myGrid",this.filesData="small.json",this.rowHeight=void 0,this.paginate=!1,this.paginateToggle=!1,this.uploads=!1,this.multiselect=!1,this.filterStyle={"float":"right",width:"50%"},this.columnTitles=function(){return[{title:"Title",width:"50%",sortType:"text",sort:!0},{title:"Author",width:"25%",sortType:"text"},{title:"Age",width:"10%",sortType:"number"},{title:"Actions",width:"15%"}]},this.resolveRows=function(){return[{data:"title",folderIcons:!0,filter:!0},{data:"person",filter:!0},{data:"age",filter:!1},{data:"action",sortInclude:!1,filter:!1,custom:function(t){var o=this;return e("button.btn.btn-danger.btn-xs",{onclick:function(e){e.stopPropagation(),o.deleteNode(t.parentID,t.id)}}," X ")}}]},this.hoverClass=void 0,this.hoverClassMultiselect="tb-multiselect",this.showFilter=!0,this.title="Grid Title",this.allowMove=!0,this.moveClass=void 0,this.sortButtonSelector={},this.dragOptions={},this.dropOptions={},this.dragEvents={},this.dropEvents={},this.oddEvenClass={odd:"tb-odd",even:"tb-even"},this.onload=function(){},this.togglecheck=function(){return!0},this.onfilter=function(){},this.onfilterreset=function(){},this.createcheck=function(){return!0},this.oncreate=function(){},this.deletecheck=function(){return!0},this.ondelete=function(){},this.movecheck=function(){return!0},this.onmove=function(){},this.movefail=function(){return!0},this.addcheck=function(){return!0},this.onadd=function(){},this.onselectrow=function(){},this.onmultiselect=function(){},this.onmouseoverrow=function(){},this.ontogglefolder=function(){},this.dropzone={url:"http://www.torrentplease.com/dropzone.php"},this.dropzoneEvents={},this.resolveIcon=function(t){return"folder"===t.kind?t.open?e("i.fa.fa-folder-open-o"," "):e("i.fa.fa-folder-o"," "):t.data.icon?e("i.fa."+t.data.icon," "):e("i.fa.fa-file ")},this.resolveToggle=function(t){var o=e("i.fa.fa-minus-square-o"," "),n=e("i.fa.fa-plus-square-o"," ");return"folder"===t.kind&&t.children.length>0?t.open?o:n:""},this.resolvePagination=function(t,o){return e("span",[e("span","Page: "),e("span.tb-pageCount",o),e("span"," / "+t)])},this.resolveUploadUrl=function(){return"/upload"},this.resolveLazyloadUrl=function(){return!1},this.lazyLoadError=function(){},this.lazyLoadOnLoad=function(){}},p=function(t){var o=new h,n=$.extend(o,t),i={};return i.controller=function(){this.tbController=new c.controller(n)},i.view=function(t){return c.view(t.tbController)},e.module(document.getElementById(n.divID),i)};return p});